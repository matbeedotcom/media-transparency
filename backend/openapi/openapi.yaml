# MITDS API - OpenAPI 3.1.0 Specification
# Media Influence Topology & Detection System REST API
#
# This is a bundled version of the specification.
# For modular source files, see:
# - paths/*.yaml - Endpoint definitions by domain
# - components/schemas/*.yaml - Schema definitions
# - components/parameters.yaml - Reusable parameters
# - components/responses.yaml - Common responses
# - components/security.yaml - Security schemes

openapi: "3.1.0"

info:
  title: MITDS API
  version: 1.0.0
  description: |
    # Media Influence Topology & Detection System (MITDS)

    REST API for investigating connections between media outlets, organizations,
    and their funding sources. Detects potential coordinated influence campaigns
    through analysis of funding patterns, shared infrastructure, and temporal coordination.

    ## Authentication
    Most endpoints require JWT authentication via Bearer token.

    ## Rate Limits
    - Default: 100 req/min
    - Search: 30 req/min
    - Detection: 10 req/min
  contact:
    name: MITDS Team
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: http://localhost:8000
    description: Local development
  - url: /
    description: Current server

tags:
  - name: Health
    description: Service health checks
  - name: Entities
    description: Entity management
  - name: Relationships
    description: Relationship queries
  - name: Detection
    description: Coordination detection
  - name: Ingestion
    description: Data ingestion
  - name: Reports
    description: Report generation
  - name: Jobs
    description: Background jobs
  - name: Validation
    description: Validation framework
  - name: Resolution
    description: Entity resolution
  - name: Settings
    description: System settings
  - name: Research
    description: Research sessions
  - name: Cases
    description: Case management
  - name: Meta OAuth
    description: Meta authentication

paths:
  /:
    get:
      operationId: getRoot
      summary: API root
      tags: [Health]
      security: []
      responses:
        '200':
          description: API info
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                  version:
                    type: string

  /health:
    get:
      operationId: healthCheck
      summary: Health check
      tags: [Health]
      security: []
      responses:
        '200':
          description: Healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  service:
                    type: string

  /health/ready:
    get:
      operationId: readinessCheck
      summary: Readiness check
      tags: [Health]
      security: []
      responses:
        '200':
          description: Ready
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  checks:
                    type: object

  /health/live:
    get:
      operationId: livenessCheck
      summary: Liveness check
      tags: [Health]
      security: []
      responses:
        '200':
          description: Alive
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string

  /api/v1/entities:
    get:
      operationId: searchEntities
      summary: Search entities
      tags: [Entities]
      parameters:
        - name: q
          in: query
          schema:
            type: string
        - name: type
          in: query
          schema:
            $ref: '#/components/schemas/EntityType'
        - name: jurisdiction
          in: query
          schema:
            type: string
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/OffsetParam'
      responses:
        '200':
          description: Entities found
          content:
            application/json:
              schema:
                type: object
                properties:
                  results:
                    type: array
                    items:
                      $ref: '#/components/schemas/EntityResponse'
                  total:
                    type: integer
                  limit:
                    type: integer
                  offset:
                    type: integer

  /api/v1/entities/{entity_id}:
    get:
      operationId: getEntity
      summary: Get entity
      tags: [Entities]
      parameters:
        - $ref: '#/components/parameters/EntityIdParam'
      responses:
        '200':
          description: Entity details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EntityResponse'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/v1/entities/{entity_id}/relationships:
    get:
      operationId: getEntityRelationships
      summary: Get entity relationships
      tags: [Entities]
      parameters:
        - $ref: '#/components/parameters/EntityIdParam'
        - name: rel_type
          in: query
          schema:
            $ref: '#/components/schemas/RelationType'
        - name: direction
          in: query
          schema:
            type: string
            enum: [incoming, outgoing, both]
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Relationships
          content:
            application/json:
              schema:
                type: object
                properties:
                  relationships:
                    type: array
                    items:
                      $ref: '#/components/schemas/RelationshipResponse'
                  total:
                    type: integer

  /api/v1/entities/{entity_id}/evidence:
    get:
      operationId: getEntityEvidence
      summary: Get entity evidence
      tags: [Entities]
      parameters:
        - $ref: '#/components/parameters/EntityIdParam'
        - name: type
          in: query
          schema:
            $ref: '#/components/schemas/EvidenceType'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/OffsetParam'
      responses:
        '200':
          description: Evidence list
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/EvidenceResponse'
                  evidence:
                    type: array
                    items:
                      $ref: '#/components/schemas/EvidenceResponse'
                  total:
                    type: integer

  /api/v1/entities/{entity_id}/stats:
    get:
      operationId: getEntityStats
      summary: Get entity statistics
      tags: [Entities]
      parameters:
        - $ref: '#/components/parameters/EntityIdParam'
      responses:
        '200':
          description: Entity statistics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EntityStats'

  /api/v1/entities/{entity_id}/board-interlocks:
    get:
      operationId: getBoardInterlocks
      summary: Get board interlocks
      tags: [Entities]
      parameters:
        - $ref: '#/components/parameters/EntityIdParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Board interlocks
          content:
            application/json:
              schema:
                type: object
                properties:
                  interlocks:
                    type: array
                    items:
                      $ref: '#/components/schemas/BoardInterlockItem'
                  total:
                    type: integer

  /api/v1/relationships/path:
    get:
      operationId: findShortestPath
      summary: Find shortest path
      tags: [Relationships]
      parameters:
        - name: from_id
          in: query
          required: true
          schema:
            type: string
            format: uuid
        - name: to_id
          in: query
          required: true
          schema:
            type: string
            format: uuid
        - name: max_hops
          in: query
          schema:
            type: integer
            default: 5
      responses:
        '200':
          description: Path result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PathResult'

  /api/v1/relationships/paths/all:
    get:
      operationId: findAllPaths
      summary: Find all paths between entities
      tags: [Relationships]
      parameters:
        - name: from_id
          in: query
          required: true
          schema:
            type: string
            format: uuid
        - name: to_id
          in: query
          required: true
          schema:
            type: string
            format: uuid
        - name: max_hops
          in: query
          schema:
            type: integer
            default: 5
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: All paths
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AllPathsResponse'

  /api/v1/relationships/connecting-entities:
    get:
      operationId: findConnectingEntities
      summary: Find connecting entities
      tags: [Relationships]
      parameters:
        - name: entity_ids
          in: query
          required: true
          schema:
            type: array
            items:
              type: string
              format: uuid
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Connecting entities
          content:
            application/json:
              schema:
                type: object
                properties:
                  connectors:
                    type: array
                    items:
                      $ref: '#/components/schemas/EntitySummary'
                  connecting_entities:
                    type: array
                    items:
                      $ref: '#/components/schemas/EntitySummary'
                  total_connectors:
                    type: integer

  /api/v1/relationships/graph-at-time/{entity_id}:
    get:
      operationId: getGraphAtTime
      summary: Get entity graph at specific time
      tags: [Relationships]
      parameters:
        - name: entity_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: as_of
          in: query
          schema:
            type: string
            format: date-time
        - name: depth
          in: query
          schema:
            type: integer
            default: 2
      responses:
        '200':
          description: Graph snapshot
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GraphSnapshot'

  /api/v1/relationships/changes:
    get:
      operationId: getRelationshipChanges
      summary: Get relationship changes over time
      tags: [Relationships]
      parameters:
        - name: entity_id
          in: query
          schema:
            type: string
            format: uuid
        - name: since
          in: query
          schema:
            type: string
            format: date-time
        - name: until
          in: query
          schema:
            type: string
            format: date-time
        - name: from_date
          in: query
          schema:
            type: string
            format: date-time
        - name: to_date
          in: query
          schema:
            type: string
            format: date-time
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Relationship changes
          content:
            application/json:
              schema:
                type: object
                properties:
                  changes:
                    type: array
                    items:
                      $ref: '#/components/schemas/RelationshipChange'
                  added_relationships:
                    type: array
                    items:
                      $ref: '#/components/schemas/RelationshipResponse'
                  removed_relationships:
                    type: array
                    items:
                      $ref: '#/components/schemas/RelationshipResponse'
                  modified_relationships:
                    type: array
                    items:
                      $ref: '#/components/schemas/RelationshipResponse'

  /api/v1/relationships/timeline:
    get:
      operationId: getRelationshipTimeline
      summary: Get relationship timeline
      tags: [Relationships]
      parameters:
        - name: entity_id
          in: query
          schema:
            type: string
            format: uuid
        - name: source_id
          in: query
          schema:
            type: string
            format: uuid
        - name: target_id
          in: query
          schema:
            type: string
            format: uuid
        - name: rel_type
          in: query
          schema:
            $ref: '#/components/schemas/RelationType'
      responses:
        '200':
          description: Relationship timeline
          content:
            application/json:
              schema:
                type: object
                properties:
                  periods:
                    type: array
                    items:
                      $ref: '#/components/schemas/TimelinePeriod'

  /api/v1/relationships/funding/paths/{funder_id}:
    get:
      operationId: getFundingPaths
      summary: Get funding paths from a funder
      tags: [Relationships]
      parameters:
        - name: funder_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: max_hops
          in: query
          schema:
            type: integer
            default: 3
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Funding paths
          content:
            application/json:
              schema:
                type: object
                properties:
                  paths:
                    type: array
                    items:
                      $ref: '#/components/schemas/FundingPath'

  /api/v1/relationships/funding/recipients/{funder_id}:
    get:
      operationId: getFundingRecipients
      summary: Get funding recipients
      tags: [Relationships]
      parameters:
        - name: funder_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: fiscal_year
          in: query
          schema:
            type: integer
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Funding recipients
          content:
            application/json:
              schema:
                type: object
                properties:
                  recipients:
                    type: array
                    items:
                      $ref: '#/components/schemas/FundingRecipient'

  /api/v1/relationships/funding/sources/{recipient_id}:
    get:
      operationId: getFundingSources
      summary: Get funding sources
      tags: [Relationships]
      parameters:
        - name: recipient_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: fiscal_year
          in: query
          schema:
            type: integer
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Funding sources
          content:
            application/json:
              schema:
                type: object
                properties:
                  sources:
                    type: array
                    items:
                      $ref: '#/components/schemas/FundingSource'
                  funders:
                    type: array
                    items:
                      $ref: '#/components/schemas/FundingSource'

  /api/v1/relationships/funding/clusters:
    get:
      operationId: getFundingClusters
      summary: Get funding clusters
      tags: [Relationships]
      parameters:
        - name: min_size
          in: query
          schema:
            type: integer
            default: 3
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Funding clusters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FundingClustersResponse'

  /api/v1/relationships/shared-funders:
    get:
      operationId: getSharedFunders
      summary: Get shared funders between entities
      tags: [Relationships]
      parameters:
        - name: entity_ids
          in: query
          required: true
          schema:
            type: array
            items:
              type: string
              format: uuid
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Shared funders
          content:
            application/json:
              schema:
                type: object
                properties:
                  shared_funders:
                    type: array
                    items:
                      $ref: '#/components/schemas/SharedFunder'

  /api/v1/detection/temporal-coordination:
    post:
      operationId: analyzeTemporalCoordination
      summary: Temporal coordination analysis
      tags: [Detection]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TemporalAnalysisRequest'
      responses:
        '200':
          description: Analysis result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TemporalAnalysisResponse'

  /api/v1/detection/composite-score:
    post:
      operationId: calculateCompositeScore
      summary: Calculate composite score
      tags: [Detection]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CompositeScoreRequest'
      responses:
        '200':
          description: Score result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CompositeScoreResponse'

  /api/v1/detection/funding-clusters:
    post:
      operationId: detectFundingClusters
      summary: Detect funding clusters
      tags: [Detection]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FundingClusterRequest'
      responses:
        '200':
          description: Cluster detection result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FundingClusterDetectionResponse'

  /api/v1/detection/infrastructure-sharing:
    post:
      operationId: detectInfrastructureSharing
      summary: Detect infrastructure sharing
      tags: [Detection]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InfrastructureSharingRequest'
      responses:
        '200':
          description: Infrastructure sharing result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InfrastructureSharingResponse'

  /api/v1/detection/explain/{finding_id}:
    get:
      operationId: explainFinding
      summary: Explain finding
      tags: [Detection]
      parameters:
        - name: finding_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Finding explanation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FindingExplanation'

  /api/v1/ingestion/search:
    get:
      operationId: searchCompanies
      summary: Search companies
      tags: [Ingestion]
      parameters:
        - name: q
          in: query
          required: true
          schema:
            type: string
        - name: sources
          in: query
          schema:
            type: string
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Search results
          content:
            application/json:
              schema:
                type: object
                properties:
                  results:
                    type: array
                    items:
                      $ref: '#/components/schemas/CompanySearchResult'
                  sources_failed:
                    type: array
                    items:
                      type: string

  /api/v1/ingestion/quick-ingest:
    post:
      operationId: quickIngest
      summary: Quick corporation ingest
      tags: [Ingestion]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QuickIngestRequest'
      responses:
        '200':
          description: Ingest result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QuickIngestResponse'

  /api/v1/ingestion/autocomplete:
    get:
      operationId: autocompleteEntities
      summary: Autocomplete entities
      tags: [Ingestion]
      parameters:
        - name: q
          in: query
          required: true
          schema:
            type: string
        - name: type
          in: query
          description: Entity type filter (comma-separated for multiple)
          schema:
            type: string
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Autocomplete suggestions
          content:
            application/json:
              schema:
                type: object
                properties:
                  suggestions:
                    type: array
                    items:
                      $ref: '#/components/schemas/AutocompleteSuggestion'

  /api/v1/ingestion/status:
    get:
      operationId: getIngestionStatus
      summary: Get ingestion status
      tags: [Ingestion]
      responses:
        '200':
          description: Ingestion status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IngestionStatusResponse'

  /api/v1/ingestion/runs:
    get:
      operationId: getIngestionRuns
      summary: Get ingestion runs
      tags: [Ingestion]
      parameters:
        - name: source
          in: query
          schema:
            type: string
        - name: status
          in: query
          schema:
            $ref: '#/components/schemas/IngestionStatus'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/OffsetParam'
      responses:
        '200':
          description: Ingestion runs
          content:
            application/json:
              schema:
                type: object
                properties:
                  runs:
                    type: array
                    items:
                      $ref: '#/components/schemas/IngestionRunResponse'
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/IngestionRunResponse'
                  total:
                    type: integer

  /api/v1/ingestion/runs/{run_id}:
    get:
      operationId: getIngestionRun
      summary: Get ingestion run
      tags: [Ingestion]
      parameters:
        - name: run_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Ingestion run details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IngestionRunResponse'

  /api/v1/ingestion/runs/{run_id}/logs:
    get:
      operationId: getIngestionRunLogs
      summary: Get ingestion run logs
      tags: [Ingestion]
      parameters:
        - name: run_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - $ref: '#/components/parameters/LimitParam'
        - name: offset
          in: query
          schema:
            type: integer
            default: 0
      responses:
        '200':
          description: Ingestion run logs
          content:
            application/json:
              schema:
                type: object
                properties:
                  logs:
                    type: array
                    items:
                      $ref: '#/components/schemas/IngestionLogEntry'
                  lines:
                    type: array
                    items:
                      type: string
                  is_live:
                    type: boolean
                  total_lines:
                    type: integer

  /api/v1/ingestion/{source}/trigger:
    post:
      operationId: triggerIngestion
      summary: Trigger ingestion for source
      tags: [Ingestion]
      parameters:
        - name: source
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                full_refresh:
                  type: boolean
                  default: false
                incremental:
                  type: boolean
                  default: true
                start_year:
                  type: integer
                end_year:
                  type: integer
                limit:
                  type: integer
                target_entities:
                  type: array
                  items:
                    type: string
      responses:
        '202':
          description: Ingestion triggered
          content:
            application/json:
              schema:
                type: object
                properties:
                  job_id:
                    type: string
                    format: uuid
                  message:
                    type: string

  /api/v1/jobs:
    get:
      operationId: listJobs
      summary: List jobs
      tags: [Jobs]
      parameters:
        - name: status
          in: query
          schema:
            type: string
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/OffsetParam'
      responses:
        '200':
          description: Job list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobList'

  /api/v1/jobs/{job_id}:
    get:
      operationId: getJobStatus
      summary: Get job status
      tags: [Jobs]
      parameters:
        - name: job_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Job status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobStatus'

  /api/v1/jobs/{job_id}/result:
    get:
      operationId: getJobResult
      summary: Get job result
      tags: [Jobs]
      parameters:
        - name: job_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Job result
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobResult'

  /api/v1/jobs/{job_id}/cancel:
    post:
      operationId: cancelJob
      summary: Cancel job
      tags: [Jobs]
      parameters:
        - name: job_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Job cancelled
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  message:
                    type: string

  /api/v1/cases:
    get:
      operationId: listCases
      summary: List cases
      tags: [Cases]
      parameters:
        - name: status
          in: query
          schema:
            $ref: '#/components/schemas/CaseStatus'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/OffsetParam'
      responses:
        '200':
          description: Case list
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/CaseResponse'
                  total:
                    type: integer
    post:
      operationId: createCase
      summary: Create case
      tags: [Cases]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCaseRequest'
      responses:
        '201':
          description: Case created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseResponse'

  /api/v1/cases/{case_id}:
    get:
      operationId: getCase
      summary: Get case
      tags: [Cases]
      parameters:
        - name: case_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Case details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseResponse'
    delete:
      operationId: deleteCase
      summary: Delete case
      tags: [Cases]
      parameters:
        - name: case_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '204':
          description: Case deleted

  /api/v1/cases/{case_id}/start:
    post:
      operationId: startCase
      summary: Start case processing
      tags: [Cases]
      parameters:
        - name: case_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Case started
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseResponse'

  /api/v1/cases/{case_id}/pause:
    post:
      operationId: pauseCase
      summary: Pause case processing
      tags: [Cases]
      parameters:
        - name: case_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Case paused
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseResponse'

  /api/v1/cases/{case_id}/resume:
    post:
      operationId: resumeCase
      summary: Resume case processing
      tags: [Cases]
      parameters:
        - name: case_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Case resumed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseResponse'

  /api/v1/cases/{case_id}/processing:
    get:
      operationId: getCaseProcessing
      summary: Get case processing details
      tags: [Cases]
      parameters:
        - name: case_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Processing details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProcessingDetails'

  /api/v1/cases/{case_id}/report:
    get:
      operationId: getCaseReport
      summary: Get case report
      tags: [Cases]
      parameters:
        - name: case_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: format
          in: query
          schema:
            type: string
            enum: [json, pdf, html]
            default: json
      responses:
        '200':
          description: Case report
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseReportResponse'
    post:
      operationId: generateCaseReport
      summary: Generate case report
      tags: [Cases]
      parameters:
        - name: case_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                format:
                  type: string
                  enum: [json, pdf, html]
                include_evidence:
                  type: boolean
      responses:
        '200':
          description: Report generated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseReportResponse'

  /api/v1/cases/{case_id}/matches:
    get:
      operationId: listCaseMatches
      summary: List case matches
      tags: [Cases]
      parameters:
        - name: case_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: status
          in: query
          schema:
            $ref: '#/components/schemas/MatchStatus'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/OffsetParam'
      responses:
        '200':
          description: Matches list
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/EntityMatchResponse'
                  total:
                    type: integer
                  pending_count:
                    type: integer

  /api/v1/cases/matches/{match_id}/approve:
    post:
      operationId: approveMatch
      summary: Approve match
      tags: [Cases]
      parameters:
        - name: match_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                notes:
                  type: string
      responses:
        '200':
          description: Match approved
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EntityMatchResponse'

  /api/v1/cases/matches/{match_id}/reject:
    post:
      operationId: rejectMatch
      summary: Reject match
      tags: [Cases]
      parameters:
        - name: match_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                notes:
                  type: string
      responses:
        '200':
          description: Match rejected
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EntityMatchResponse'

  /api/v1/cases/matches/{match_id}/defer:
    post:
      operationId: deferMatch
      summary: Defer match decision
      tags: [Cases]
      parameters:
        - name: match_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                notes:
                  type: string
      responses:
        '200':
          description: Match deferred
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EntityMatchResponse'

  /api/v1/research/sessions:
    get:
      operationId: listResearchSessions
      summary: List research sessions
      tags: [Research]
      parameters:
        - name: status
          in: query
          schema:
            $ref: '#/components/schemas/SessionStatus'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Sessions
          content:
            application/json:
              schema:
                type: object
                properties:
                  sessions:
                    type: array
                    items:
                      $ref: '#/components/schemas/SessionResponse'
                  total:
                    type: integer
    post:
      operationId: createResearchSession
      summary: Create research session
      tags: [Research]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSessionRequest'
      responses:
        '201':
          description: Session created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SessionResponse'

  /api/v1/research/linkedin/trigger:
    post:
      operationId: triggerLinkedInIngestion
      summary: Trigger LinkedIn data ingestion for entity
      tags: [Research]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                entity_id:
                  type: string
                  format: uuid
                company_entity_id:
                  type: string
                  format: uuid
                linkedin_url:
                  type: string
                company_name:
                  type: string
                csv_data:
                  type: string
                scrape:
                  type: boolean
                session_cookie:
                  type: string
                titles_filter:
                  type: array
                  items:
                    type: string
                limit:
                  type: integer
      responses:
        '200':
          description: Ingestion triggered
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/JobStatus'

  /api/v1/research/linkedin/status/{entity_id}:
    get:
      operationId: getLinkedInStatus
      summary: Get LinkedIn ingestion status for entity
      tags: [Research]
      parameters:
        - name: entity_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: LinkedIn status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LinkedInStatusResponse'

  /api/v1/resolution/candidates:
    get:
      operationId: listCandidates
      summary: List resolution candidates
      tags: [Resolution]
      parameters:
        - name: status
          in: query
          schema:
            type: string
            enum: [PENDING, IN_PROGRESS, APPROVED, REJECTED]
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/OffsetParam'
      responses:
        '200':
          description: Resolution candidates
          content:
            application/json:
              schema:
                type: object
                properties:
                  results:
                    type: array
                    items:
                      $ref: '#/components/schemas/ResolutionCandidate'
                  total:
                    type: integer

  /api/v1/resolution/stats:
    get:
      operationId: resolutionStats
      summary: Get resolution statistics
      tags: [Resolution]
      responses:
        '200':
          description: Resolution statistics
          content:
            application/json:
              schema:
                type: object
                properties:
                  total_pending:
                    type: integer
                  total_in_progress:
                    type: integer
                  total_approved:
                    type: integer
                  total_rejected:
                    type: integer
                  total_merged:
                    type: integer
                  avg_confidence:
                    type: number
                  by_strategy:
                    type: object
                    additionalProperties:
                      type: integer

  /api/v1/resolution/trigger:
    post:
      operationId: triggerResolution
      summary: Trigger resolution process
      tags: [Resolution]
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                entity_type:
                  $ref: '#/components/schemas/EntityType'
                dry_run:
                  type: boolean
                  default: false
      responses:
        '200':
          description: Resolution triggered
          content:
            application/json:
              schema:
                type: object
                properties:
                  candidates_found:
                    type: integer
                  dry_run:
                    type: boolean
                  message:
                    type: string

  /api/v1/resolution/candidates/{candidate_id}/merge:
    post:
      operationId: mergeCandidate
      summary: Merge resolution candidate
      tags: [Resolution]
      parameters:
        - name: candidate_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Candidate merged
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  message:
                    type: string

  /api/v1/resolution/candidates/{candidate_id}/reject:
    post:
      operationId: rejectCandidate
      summary: Reject resolution candidate
      tags: [Resolution]
      parameters:
        - name: candidate_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Candidate rejected
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                  message:
                    type: string

  /api/v1/settings:
    get:
      operationId: getSettings
      summary: Get settings
      tags: [Settings]
      responses:
        '200':
          description: Settings
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SettingsResponse'

  /api/v1/settings/connections:
    get:
      operationId: getConnectionsStatus
      summary: Get connections status
      tags: [Settings]
      responses:
        '200':
          description: Connections status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConnectionsResponse'

  /api/v1/settings/sources:
    get:
      operationId: getDataSources
      summary: Get data sources
      tags: [Settings]
      responses:
        '200':
          description: Data sources
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DataSourcesResponse'

  /api/v1/meta/auth/login:
    get:
      operationId: getMetaAuthUrl
      summary: Get Meta OAuth URL
      tags: [Meta OAuth]
      security: []
      responses:
        '200':
          description: OAuth URL
          content:
            application/json:
              schema:
                type: object
                properties:
                  auth_url:
                    type: string
                    format: uri
                  state:
                    type: string

  /api/v1/meta/auth/status:
    get:
      operationId: getMetaAuthStatus
      summary: Get Meta auth status
      tags: [Meta OAuth]
      responses:
        '200':
          description: Auth status
          content:
            application/json:
              schema:
                type: object
                properties:
                  connected:
                    type: boolean
                  expires_at:
                    type: string
                    format: date-time
                  fb_user_name:
                    type: string
                  expires_soon:
                    type: boolean
                  days_until_expiry:
                    type: integer
                  scopes:
                    type: array
                    items:
                      type: string

  /api/v1/meta/auth/disconnect:
    delete:
      operationId: disconnectMeta
      summary: Disconnect Meta account
      tags: [Meta OAuth]
      responses:
        '200':
          description: Disconnected
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string

  /api/v1/meta/auth/refresh:
    post:
      operationId: refreshMetaToken
      summary: Refresh Meta token
      tags: [Meta OAuth]
      responses:
        '200':
          description: Token refreshed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  expires_at:
                    type: string
                    format: date-time

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  parameters:
    LimitParam:
      name: limit
      in: query
      schema:
        type: integer
        default: 20
        minimum: 1
        maximum: 100
    OffsetParam:
      name: offset
      in: query
      schema:
        type: integer
        default: 0
        minimum: 0
    EntityIdParam:
      name: entity_id
      in: path
      required: true
      schema:
        type: string
        format: uuid

  responses:
    BadRequest:
      description: Bad Request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    NotFound:
      description: Not Found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    Unauthorized:
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'

  schemas:
    ErrorResponse:
      type: object
      required: [success, error, error_code]
      properties:
        success:
          type: boolean
          enum: [false]
        error:
          type: string
        error_code:
          type: string
        details:
          type: array
          items:
            type: object
            properties:
              code:
                type: string
              message:
                type: string
              field:
                type: string

    EntityType:
      type: string
      enum: [PERSON, ORGANIZATION, OUTLET, DOMAIN, PLATFORM_ACCOUNT, SPONSOR, VENDOR]

    EntitySummary:
      type: object
      required: [id, entity_type, name]
      properties:
        id:
          type: string
          format: uuid
        entity_type:
          $ref: '#/components/schemas/EntityType'
        name:
          type: string
        jurisdiction:
          type: string
        identifiers:
          type: object
          additionalProperties:
            type: string

    EntityStats:
      type: object
      properties:
        relationship_count:
          type: integer
        evidence_count:
          type: integer
        funding_received:
          type: number
        funding_given:
          type: number
        board_memberships:
          type: integer
        first_seen:
          type: string
          format: date-time
        last_updated:
          type: string
          format: date-time

    IngestionLogEntry:
      type: object
      properties:
        timestamp:
          type: string
          format: date-time
        level:
          type: string
          enum: [DEBUG, INFO, WARNING, ERROR]
        message:
          type: string
        source:
          type: string

    AllPathsResponse:
      type: object
      properties:
        paths:
          type: array
          items:
            $ref: '#/components/schemas/PathResult'
        total:
          type: integer

    GraphSnapshot:
      type: object
      properties:
        entities:
          type: array
          items:
            $ref: '#/components/schemas/EntitySummary'
        relationships:
          type: array
          items:
            $ref: '#/components/schemas/RelationshipResponse'
        as_of:
          type: string
          format: date-time

    RelationshipChange:
      type: object
      properties:
        id:
          type: string
          format: uuid
        change_type:
          type: string
          enum: [CREATED, UPDATED, DELETED]
        relationship:
          $ref: '#/components/schemas/RelationshipResponse'
        changed_at:
          type: string
          format: date-time
        changed_fields:
          type: array
          items:
            type: string

    TimelinePeriod:
      type: object
      properties:
        start:
          type: string
          format: date-time
        end:
          type: string
          format: date-time
        valid_from:
          type: string
          format: date-time
        valid_to:
          type: string
          format: date-time
        is_current:
          type: boolean
        properties:
          type: object
          additionalProperties: true
        relationships:
          type: array
          items:
            $ref: '#/components/schemas/RelationshipResponse'

    FundingPath:
      type: object
      properties:
        path:
          type: array
          items:
            $ref: '#/components/schemas/EntitySummary'
        total_amount:
          type: number
        hops:
          type: integer
        intermediaries:
          type: array
          items:
            $ref: '#/components/schemas/EntitySummary'
        recipient:
          $ref: '#/components/schemas/EntitySummary'
        source:
          $ref: '#/components/schemas/EntitySummary'

    FundingRecipient:
      type: object
      properties:
        entity:
          $ref: '#/components/schemas/EntitySummary'
        total_received:
          type: number
        relationship_count:
          type: integer
        amount:
          type: number

    FundingSource:
      type: object
      properties:
        entity:
          $ref: '#/components/schemas/EntitySummary'
        total_given:
          type: number
        amount:
          type: number
        relationship_count:
          type: integer

    SharedFunder:
      type: object
      properties:
        funder:
          $ref: '#/components/schemas/EntitySummary'
        recipients:
          type: array
          items:
            $ref: '#/components/schemas/EntitySummary'
        total_funding:
          type: number
        shared_count:
          type: integer
        funding_concentration:
          type: number

    EntityResponse:
      type: object
      required: [id, entity_type, name, confidence, created_at]
      properties:
        id:
          type: string
          format: uuid
        entity_type:
          $ref: '#/components/schemas/EntityType'
        name:
          type: string
        confidence:
          type: number
          minimum: 0
          maximum: 1
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        aliases:
          type: array
          items:
            type: string
        properties:
          type: object

    RelationType:
      type: string
      enum: [FUNDED_BY, DIRECTOR_OF, EMPLOYED_BY, SPONSORED_BY, OWNS, CITED, AMPLIFIED, SHARED_INFRA]

    RelationshipResponse:
      type: object
      required: [id, rel_type, source_entity, target_entity, confidence]
      properties:
        id:
          type: string
          format: uuid
        rel_type:
          $ref: '#/components/schemas/RelationType'
        source_entity:
          $ref: '#/components/schemas/EntitySummary'
        target_entity:
          $ref: '#/components/schemas/EntitySummary'
        confidence:
          type: number
        properties:
          type: object
        evidence_count:
          type: integer
        valid_from:
          type: string
          format: date-time
        valid_to:
          type: string
          format: date-time

    PathResult:
      type: object
      properties:
        path_found:
          type: boolean
        source:
          $ref: '#/components/schemas/EntitySummary'
        target:
          $ref: '#/components/schemas/EntitySummary'
        hops:
          type: integer
        path_nodes:
          type: array
          items:
            $ref: '#/components/schemas/EntitySummary'

    TemporalAnalysisRequest:
      type: object
      required: [entity_ids]
      properties:
        entity_ids:
          type: array
          items:
            type: string
            format: uuid
          minItems: 2
        start_date:
          type: string
          format: date-time
        end_date:
          type: string
          format: date-time
        exclude_hard_negatives:
          type: boolean
          default: false
        async_mode:
          type: boolean
          default: false

    TemporalAnalysisResponse:
      type: object
      properties:
        analysis_id:
          type: string
          format: uuid
        coordination_score:
          type: number
        confidence:
          type: number
        is_coordinated:
          type: boolean
        explanation:
          type: string
        status:
          type: string
          enum: [PROCESSING, COMPLETED, FAILED]
        entity_count:
          type: integer
        event_count:
          type: integer
        hard_negatives_filtered:
          type: integer
        time_range_start:
          type: string
          format: date-time
        time_range_end:
          type: string
          format: date-time
        bursts:
          type: array
          items:
            type: object
            properties:
              start:
                type: string
                format: date-time
              end:
                type: string
                format: date-time
              entity_count:
                type: integer
              score:
                type: number
        lead_lag_pairs:
          type: array
          items:
            type: object
            properties:
              leader_id:
                type: string
                format: uuid
              follower_id:
                type: string
                format: uuid
              lag_seconds:
                type: number
              confidence:
                type: number
        synchronized_groups:
          type: array
          items:
            type: object
            properties:
              entity_ids:
                type: array
                items:
                  type: string
                  format: uuid
              sync_score:
                type: number

    CompositeScoreRequest:
      type: object
      required: [entity_ids]
      properties:
        entity_ids:
          type: array
          items:
            type: string
            format: uuid
          minItems: 2
        include_temporal:
          type: boolean
          default: true
        include_funding:
          type: boolean
          default: true
        include_infrastructure:
          type: boolean
          default: true

    FundingClusterRequest:
      type: object
      properties:
        entity_type:
          $ref: '#/components/schemas/EntityType'
        fiscal_year:
          type: integer
        jurisdiction:
          type: string
        min_shared_funders:
          type: integer
          default: 2
        limit:
          type: integer
          default: 50

    FundingClusterDetectionResponse:
      type: object
      properties:
        clusters:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
              entities:
                type: array
                items:
                  $ref: '#/components/schemas/EntitySummary'
              shared_funders:
                type: array
                items:
                  $ref: '#/components/schemas/EntitySummary'
              total_funding:
                type: number
        total_clusters:
          type: integer
        explanation:
          type: string

    InfrastructureSharingRequest:
      type: object
      properties:
        entity_ids:
          type: array
          items:
            type: string
            format: uuid
        domains:
          type: array
          items:
            type: string
        include_domains:
          type: boolean
          default: true
        include_addresses:
          type: boolean
          default: true
        min_score:
          type: number
          default: 0.5

    InfrastructureSharingResponse:
      type: object
      properties:
        overlaps:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
              entities:
                type: array
                items:
                  $ref: '#/components/schemas/EntitySummary'
              shared_resource:
                type: string
        explanation:
          type: string
        errors:
          type: array
          items:
            type: string
        domains_scanned:
          type: integer
        total_matches:
          type: integer
        matches:
          type: array
          items:
            type: object
            additionalProperties: true
        profiles:
          type: array
          items:
            type: object
            additionalProperties: true

    CompositeScoreResponse:
      type: object
      properties:
        finding_id:
          type: string
          format: uuid
        overall_score:
          type: number
        adjusted_score:
          type: number
        flagged:
          type: boolean
        flag_reason:
          type: string
        explanation:
          type: string
        signal_breakdown:
          type: object
          additionalProperties:
            type: number
        category_breakdown:
          type: object
          additionalProperties:
            type: number
        confidence_band:
          type: object
          properties:
            lower:
              type: number
            upper:
              type: number
            level:
              type: string
        validation_passed:
          type: boolean
        validation_messages:
          type: array
          items:
            type: string

    CompanySearchResult:
      type: object
      properties:
        name:
          type: string
        source:
          type: string
        identifier:
          type: string
        identifier_type:
          type: string
        jurisdiction:
          type: string
        match_score:
          type: number
        status:
          type: string
        address:
          type: string

    QuickIngestRequest:
      type: object
      required: [name]
      properties:
        name:
          type: string
        jurisdiction:
          type: string
        discover_executives:
          type: boolean
          default: true

    QuickIngestResponse:
      type: object
      properties:
        found:
          type: boolean
        entity_id:
          type: string
          format: uuid
        entity_name:
          type: string
        source:
          type: string
        message:
          type: string
        linkedin_available:
          type: boolean
        sources_searched:
          type: array
          items:
            type: object
            properties:
              source:
                type: string
              found:
                type: boolean
        external_matches:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              source:
                type: string
              jurisdiction:
                type: string
              identifier:
                type: string

    JobStatus:
      type: object
      required: [job_id, job_type, status, created_at]
      properties:
        job_id:
          type: string
          format: uuid
        run_id:
          type: string
          format: uuid
        job_type:
          type: string
        status:
          type: string
          enum: [pending, running, completed, failed, cancelled]
        created_at:
          type: string
          format: date-time
        started_at:
          type: string
          format: date-time
        completed_at:
          type: string
          format: date-time
        progress:
          type: number
        error:
          type: string

    JobList:
      type: object
      properties:
        jobs:
          type: array
          items:
            $ref: '#/components/schemas/JobStatus'
        total:
          type: integer
        limit:
          type: integer
        offset:
          type: integer

    JobResult:
      type: object
      properties:
        job_id:
          type: string
          format: uuid
        status:
          type: string
        result:
          type: object
        error:
          type: string

    ResolutionCandidate:
      type: object
      properties:
        id:
          type: string
          format: uuid
        source_entity:
          $ref: '#/components/schemas/EntitySummary'
        target_entity:
          $ref: '#/components/schemas/EntitySummary'
        # Flat properties for frontend compatibility
        source_entity_id:
          type: string
          format: uuid
        source_entity_name:
          type: string
        source_entity_type:
          type: string
        candidate_entity_id:
          type: string
          format: uuid
        candidate_entity_name:
          type: string
        candidate_entity_type:
          type: string
        confidence:
          type: number
        match_confidence:
          type: number
        strategy:
          type: string
        match_strategy:
          type: string
        status:
          type: string
          enum: [PENDING, IN_PROGRESS, APPROVED, REJECTED]
        priority:
          type: string
          enum: [HIGH, MEDIUM, LOW]
        signals:
          $ref: '#/components/schemas/MatchSignals'
        match_details:
          type: object
          additionalProperties: true

    EntityMatchResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
        case_id:
          type: string
          format: uuid
        source_entity:
          $ref: '#/components/schemas/EntitySummary'
        candidate_entity:
          $ref: '#/components/schemas/EntitySummary'
        target_entity:
          $ref: '#/components/schemas/EntitySummary'
        confidence:
          type: number
        status:
          $ref: '#/components/schemas/MatchStatus'
        signals:
          $ref: '#/components/schemas/MatchSignals'
        match_signals:
          $ref: '#/components/schemas/MatchSignals'

    MatchSignals:
      type: object
      properties:
        identifier_match:
          type: object
          properties:
            type:
              type: string
            matched:
              type: boolean
        name_similarity:
          type: number
        address_overlap:
          type: object
          properties:
            city:
              type: boolean
            postal_fsa:
              type: boolean
        shared_directors:
          type: array
          items:
            type: string
        confidence:
          type: number
        jurisdiction_match:
          type: boolean

    CaseStatus:
      type: string
      enum: [INITIALIZING, PROCESSING, PAUSED, COMPLETED, FAILED]

    CreateCaseRequest:
      type: object
      required: [name, entry_point_type, entry_point_value]
      properties:
        name:
          type: string
        description:
          type: string
        entry_point_type:
          type: string
          enum: [META_AD, CORPORATION, URL, TEXT]
        entry_point_value:
          type: string
        config:
          type: object
          properties:
            max_depth:
              type: integer
              default: 2
            max_entities:
              type: integer
              default: 100

    CaseResponse:
      type: object
      required: [id, name, entry_point_type, entry_point_value, status]
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
        entry_point_type:
          type: string
        entry_point_value:
          type: string
        status:
          $ref: '#/components/schemas/CaseStatus'
        created_at:
          type: string
          format: date-time
        completed_at:
          type: string
          format: date-time
        stats:
          type: object
          properties:
            entities_discovered:
              type: integer
            relationships_found:
              type: integer
            evidence_collected:
              type: integer
            matches_pending:
              type: integer

    SessionStatus:
      type: string
      enum: [INITIALIZING, RUNNING, PAUSED, COMPLETED, FAILED]

    CreateSessionRequest:
      type: object
      required: [name, entry_point_type, entry_point_value]
      properties:
        name:
          type: string
        description:
          type: string
        entry_point_type:
          type: string
          enum: [META_ADS, COMPANY, EIN, BN, NONPROFIT, ENTITY_ID]
        entry_point_value:
          type: string

    SessionResponse:
      type: object
      required: [id, name, entry_point_type, entry_point_value, status]
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        entry_point_type:
          type: string
        entry_point_value:
          type: string
        status:
          $ref: '#/components/schemas/SessionStatus'
        created_at:
          type: string
          format: date-time

    SettingsResponse:
      type: object
      properties:
        api:
          type: object
          properties:
            version:
              type: string
            environment:
              type: string
        connections:
          type: object
        data_sources:
          type: object

security:
  - bearerAuth: []
