# Relationships API paths
# Auto-generated by export_openapi.py

/relationships/path:
  get:
    tags:
    - Relationships
    summary: Find Paths
    description: "Find shortest path between two entities.\n\nArgs:\n    from_id: Source entity ID\n    to_id: Target entity\
      \ ID\n    max_hops: Maximum path length\n    rel_types: Filter by relationship types (comma-separated)\n\nReturns:\n\
      \    Path with nodes and edges"
    operationId: find_paths_relationships_path_get
    security:
    - HTTPBearer: []
    parameters:
    - name: from_id
      in: query
      required: true
      schema:
        type: string
        format: uuid
        title: From Id
    - name: to_id
      in: query
      required: true
      schema:
        type: string
        format: uuid
        title: To Id
    - name: max_hops
      in: query
      required: false
      schema:
        type: integer
        maximum: 5
        minimum: 1
        default: 3
        title: Max Hops
    - name: rel_types
      in: query
      required: false
      schema:
        anyOf:
        - type: string
        - type: 'null'
        description: Comma-separated relationship types
        title: Rel Types
      description: Comma-separated relationship types
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FindPathResponse'
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
/relationships/paths/all:
  get:
    tags:
    - Relationships
    summary: Find All Entity Paths
    description: "Find all paths between two entities.\n\nUnlike /path which returns only the shortest path, this endpoint\n\
      returns all distinct paths up to max_hops, revealing different\nrelationship types and intermediate connections.\n\n\
      Args:\n    from_id: Source entity ID\n    to_id: Target entity ID\n    max_hops: Maximum path length\n    rel_types:\
      \ Filter by relationship types (comma-separated)\n    limit: Maximum number of paths to return\n\nReturns:\n    All\
      \ paths with nodes and edges"
    operationId: find_all_entity_paths_relationships_paths_all_get
    security:
    - HTTPBearer: []
    parameters:
    - name: from_id
      in: query
      required: true
      schema:
        type: string
        format: uuid
        title: From Id
    - name: to_id
      in: query
      required: true
      schema:
        type: string
        format: uuid
        title: To Id
    - name: max_hops
      in: query
      required: false
      schema:
        type: integer
        maximum: 6
        minimum: 1
        default: 5
        title: Max Hops
    - name: rel_types
      in: query
      required: false
      schema:
        anyOf:
        - type: string
        - type: 'null'
        description: Comma-separated relationship types
        title: Rel Types
      description: Comma-separated relationship types
    - name: limit
      in: query
      required: false
      schema:
        type: integer
        maximum: 50
        minimum: 1
        default: 10
        title: Limit
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AllPathsResponse'
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
/relationships/connecting-entities:
  get:
    tags:
    - Relationships
    summary: Find Entity Connectors
    description: "Find entities that connect multiple given entities.\n\nDiscovers hidden connections like shared directors,\n\
      board members, or intermediate organizations.\n\nArgs:\n    entity_ids: Comma-separated entity IDs (at least 2)\n  \
      \  max_hops: Maximum distance from any given entity\n    rel_types: Filter by relationship types\n\nReturns:\n    List\
      \ of connecting entities ordered by connectivity"
    operationId: find_entity_connectors_relationships_connecting_entities_get
    security:
    - HTTPBearer: []
    parameters:
    - name: entity_ids
      in: query
      required: true
      schema:
        type: string
        description: Comma-separated entity IDs to find connections between
        title: Entity Ids
      description: Comma-separated entity IDs to find connections between
    - name: max_hops
      in: query
      required: false
      schema:
        type: integer
        maximum: 5
        minimum: 1
        default: 3
        title: Max Hops
    - name: rel_types
      in: query
      required: false
      schema:
        anyOf:
        - type: string
        - type: 'null'
        description: Comma-separated relationship types
        title: Rel Types
      description: Comma-separated relationship types
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConnectingEntitiesResponse'
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
/relationships/graph-at-time/{entity_id}:
  get:
    tags:
    - Relationships
    summary: Get Entity Graph At Time
    description: "Get the state of relationships around an entity at a specific time.\n\nReturns only relationships that were\
      \ valid at the given point in time,\nbased on their valid_from and valid_to properties.\n\nArgs:\n    entity_id: Central\
      \ entity ID\n    as_of: Point in time for the snapshot (ISO format)\n    depth: How many hops to traverse\n    rel_types:\
      \ Filter by relationship types\n\nReturns:\n    Entity snapshot with valid relationships at that time"
    operationId: get_entity_graph_at_time_relationships_graph_at_time__entity_id__get
    security:
    - HTTPBearer: []
    parameters:
    - name: entity_id
      in: path
      required: true
      schema:
        type: string
        format: uuid
        title: Entity Id
    - name: as_of
      in: query
      required: true
      schema:
        type: string
        format: date-time
        description: Point in time for the snapshot
        title: As Of
      description: Point in time for the snapshot
    - name: depth
      in: query
      required: false
      schema:
        type: integer
        maximum: 3
        minimum: 1
        default: 1
        title: Depth
    - name: rel_types
      in: query
      required: false
      schema:
        anyOf:
        - type: string
        - type: 'null'
        description: Comma-separated relationship types
        title: Rel Types
      description: Comma-separated relationship types
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GraphAtTimeResponse'
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
/relationships/changes:
  get:
    tags:
    - Relationships
    summary: Get Relationship Changes
    description: "Detect changes in relationships between two time points.\n\nCompares the graph state at from_date with to_date\
      \ and identifies\nnew relationships, ended relationships, and modifications.\n\nArgs:\n    entity_id: Central entity\
      \ ID\n    from_date: Start of comparison period\n    to_date: End of comparison period\n    rel_types: Filter by relationship\
      \ types\n\nReturns:\n    Graph diff with detected changes"
    operationId: get_relationship_changes_relationships_changes_get
    security:
    - HTTPBearer: []
    parameters:
    - name: entity_id
      in: query
      required: true
      schema:
        type: string
        format: uuid
        title: Entity Id
    - name: from_date
      in: query
      required: true
      schema:
        type: string
        format: date-time
        description: Start of comparison period
        title: From Date
      description: Start of comparison period
    - name: to_date
      in: query
      required: true
      schema:
        type: string
        format: date-time
        description: End of comparison period
        title: To Date
      description: End of comparison period
    - name: rel_types
      in: query
      required: false
      schema:
        anyOf:
        - type: string
        - type: 'null'
        description: Comma-separated relationship types
        title: Rel Types
      description: Comma-separated relationship types
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RelationshipChangesResponse'
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
/relationships/timeline:
  get:
    tags:
    - Relationships
    summary: Get Entity Relationship Timeline
    description: "Get the full timeline of relationships between two entities.\n\nShows all historical periods when a relationship\
      \ existed,\nuseful for understanding the evolution of connections.\n\nArgs:\n    source_id: Source entity ID\n    target_id:\
      \ Target entity ID\n    rel_type: Filter by relationship type\n\nReturns:\n    Timeline with all historical relationship\
      \ periods"
    operationId: get_entity_relationship_timeline_relationships_timeline_get
    security:
    - HTTPBearer: []
    parameters:
    - name: source_id
      in: query
      required: true
      schema:
        type: string
        format: uuid
        title: Source Id
    - name: target_id
      in: query
      required: true
      schema:
        type: string
        format: uuid
        title: Target Id
    - name: rel_type
      in: query
      required: false
      schema:
        anyOf:
        - type: string
        - type: 'null'
        description: Filter by relationship type
        title: Rel Type
      description: Filter by relationship type
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RelationshipTimelineResponse'
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
/relationships/funding-paths/{funder_id}:
  get:
    tags:
    - Relationships
    summary: Get Funder Paths
    description: 'Get all funding paths from a funder.


      Returns paths showing how funding flows from a funder

      to various recipients, including through intermediaries.'
    operationId: get_funder_paths_relationships_funding_paths__funder_id__get
    security:
    - HTTPBearer: []
    parameters:
    - name: funder_id
      in: path
      required: true
      schema:
        type: string
        format: uuid
        title: Funder Id
    - name: max_hops
      in: query
      required: false
      schema:
        type: integer
        maximum: 5
        minimum: 1
        default: 3
        title: Max Hops
    - name: min_amount
      in: query
      required: false
      schema:
        anyOf:
        - type: number
        - type: 'null'
        description: Minimum funding amount
        title: Min Amount
      description: Minimum funding amount
    - name: fiscal_year
      in: query
      required: false
      schema:
        anyOf:
        - type: integer
        - type: 'null'
        description: Filter by fiscal year
        title: Fiscal Year
      description: Filter by fiscal year
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FundingPathsResponse'
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
/relationships/funding-recipients/{funder_id}:
  get:
    tags:
    - Relationships
    summary: Get Funder Recipients
    description: 'Get direct funding recipients of an entity.


      Returns all entities that have received funding directly

      from the specified funder.'
    operationId: get_funder_recipients_relationships_funding_recipients__funder_id__get
    security:
    - HTTPBearer: []
    parameters:
    - name: funder_id
      in: path
      required: true
      schema:
        type: string
        format: uuid
        title: Funder Id
    - name: fiscal_year
      in: query
      required: false
      schema:
        anyOf:
        - type: integer
        - type: 'null'
        description: Filter by fiscal year
        title: Fiscal Year
      description: Filter by fiscal year
    - name: min_amount
      in: query
      required: false
      schema:
        anyOf:
        - type: number
        - type: 'null'
        description: Minimum funding amount
        title: Min Amount
      description: Minimum funding amount
    - name: limit
      in: query
      required: false
      schema:
        type: integer
        maximum: 200
        minimum: 1
        default: 50
        title: Limit
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FundingRecipientsResponse'
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
/relationships/funding-sources/{recipient_id}:
  get:
    tags:
    - Relationships
    summary: Get Recipient Funders
    description: 'Get funding sources of an entity.


      Returns all entities that have provided funding directly

      to the specified recipient.'
    operationId: get_recipient_funders_relationships_funding_sources__recipient_id__get
    security:
    - HTTPBearer: []
    parameters:
    - name: recipient_id
      in: path
      required: true
      schema:
        type: string
        format: uuid
        title: Recipient Id
    - name: fiscal_year
      in: query
      required: false
      schema:
        anyOf:
        - type: integer
        - type: 'null'
        description: Filter by fiscal year
        title: Fiscal Year
      description: Filter by fiscal year
    - name: min_amount
      in: query
      required: false
      schema:
        anyOf:
        - type: number
        - type: 'null'
        description: Minimum funding amount
        title: Min Amount
      description: Minimum funding amount
    - name: limit
      in: query
      required: false
      schema:
        type: integer
        maximum: 200
        minimum: 1
        default: 50
        title: Limit
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FundingSourcesResponse'
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
/relationships/funding-clusters:
  get:
    tags:
    - Relationships
    summary: Get Funding Clusters
    description: "Get funding clusters (entities sharing common funders).\n\nIdentifies groups of entities that receive funding\
      \ from\nthe same sources, which may indicate coordinated influence.\n\nArgs:\n    min_shared_funders: Minimum funders\
      \ that must be shared\n    min_cluster_size: Minimum entities in a cluster\n    entity_type: Filter by entity type\n\
      \    fiscal_year: Filter by fiscal year\n    limit: Maximum clusters to return"
    operationId: get_funding_clusters_relationships_funding_clusters_get
    security:
    - HTTPBearer: []
    parameters:
    - name: min_shared_funders
      in: query
      required: false
      schema:
        type: integer
        maximum: 10
        minimum: 1
        default: 2
        title: Min Shared Funders
    - name: min_cluster_size
      in: query
      required: false
      schema:
        type: integer
        maximum: 20
        minimum: 2
        default: 2
        title: Min Cluster Size
    - name: entity_type
      in: query
      required: false
      schema:
        anyOf:
        - type: string
        - type: 'null'
        description: Filter by entity type (OUTLET, ORGANIZATION)
        title: Entity Type
      description: Filter by entity type (OUTLET, ORGANIZATION)
    - name: fiscal_year
      in: query
      required: false
      schema:
        anyOf:
        - type: integer
        - type: 'null'
        description: Filter by fiscal year
        title: Fiscal Year
      description: Filter by fiscal year
    - name: limit
      in: query
      required: false
      schema:
        type: integer
        maximum: 50
        minimum: 1
        default: 20
        title: Limit
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FundingClustersResponse'
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
/relationships/shared-funders:
  get:
    tags:
    - Relationships
    summary: Get Shared Funders Endpoint
    description: "Find funders shared by multiple entities.\n\nIdentifies funders that provide funding to multiple\nentities\
      \ in the dataset.\n\nArgs:\n    entity_ids: Specific entities to check (comma-separated UUIDs)\n    min_recipients:\
      \ Minimum recipients to include a funder\n    fiscal_year: Filter by fiscal year\n    limit: Maximum results"
    operationId: get_shared_funders_endpoint_relationships_shared_funders_get
    security:
    - HTTPBearer: []
    parameters:
    - name: entity_ids
      in: query
      required: false
      schema:
        anyOf:
        - type: string
        - type: 'null'
        description: Comma-separated entity IDs
        title: Entity Ids
      description: Comma-separated entity IDs
    - name: min_recipients
      in: query
      required: false
      schema:
        type: integer
        maximum: 20
        minimum: 2
        default: 2
        title: Min Recipients
    - name: fiscal_year
      in: query
      required: false
      schema:
        anyOf:
        - type: integer
        - type: 'null'
        description: Filter by fiscal year
        title: Fiscal Year
      description: Filter by fiscal year
    - name: limit
      in: query
      required: false
      schema:
        type: integer
        maximum: 50
        minimum: 1
        default: 20
        title: Limit
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SharedFundersResponse'
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
/relationships/shared-infrastructure:
  get:
    tags:
    - Relationships
    summary: Get Shared Infrastructure
    description: "Get shared infrastructure relationships between outlets.\n\nIdentifies outlets that share technical infrastructure\n\
      (hosting, analytics, CDN) even when organizational links\nare hidden. Detects signals like:\n- Same Google Analytics/GTM\
      \ IDs\n- Same hosting provider or IP address\n- Same SSL certificate SANs\n- Same AdSense publisher IDs\n- Shared nameservers\
      \ or registrar\n\nArgs:\n    outlet_ids: Comma-separated outlet IDs to check\n    domains: Comma-separated domains to\
      \ analyze\n    min_score: Minimum infrastructure sharing score to include\n\nReturns:\n    List of shared infrastructure\
      \ matches with signals"
    operationId: get_shared_infrastructure_relationships_shared_infrastructure_get
    security:
    - HTTPBearer: []
    parameters:
    - name: outlet_ids
      in: query
      required: false
      schema:
        anyOf:
        - type: string
        - type: 'null'
        description: Comma-separated outlet IDs
        title: Outlet Ids
      description: Comma-separated outlet IDs
    - name: domains
      in: query
      required: false
      schema:
        anyOf:
        - type: string
        - type: 'null'
        description: Comma-separated domains to analyze
        title: Domains
      description: Comma-separated domains to analyze
    - name: min_score
      in: query
      required: false
      schema:
        type: number
        maximum: 10.0
        minimum: 0.0
        description: Minimum score threshold
        default: 1.0
        title: Min Score
      description: Minimum score threshold
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SharedInfrastructureResponse'
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
/relationships/shared-infrastructure/analyze:
  post:
    tags:
    - Relationships
    summary: Analyze Domain Infrastructure
    description: "Analyze infrastructure for a single domain.\n\nPerforms full infrastructure detection including:\n- DNS\
      \ lookup (nameservers, A records)\n- WHOIS data (registrar, registration dates)\n- Hosting provider detection via IP/ASN\n\
      - Analytics tag detection (GA, GTM, FB Pixel, AdSense)\n- SSL certificate analysis\n\nArgs:\n    domain: Domain name\
      \ to analyze (e.g., example.com)\n\nReturns:\n    Complete infrastructure profile for the domain"
    operationId: analyze_domain_infrastructure_relationships_shared_infrastructure_analyze_post
    security:
    - HTTPBearer: []
    parameters:
    - name: domain
      in: query
      required: true
      schema:
        type: string
        description: Domain to analyze
        title: Domain
      description: Domain to analyze
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InfrastructureAnalysisResponse'
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
