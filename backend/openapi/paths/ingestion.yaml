# Ingestion API paths
# Auto-generated by export_openapi.py

/ingestion/search:
  get:
    tags:
    - Ingestion
    summary: Search Companies
    description: "Search for companies across all data sources.\n\nSearches by company name, ticker, or identifier across\
      \ SEC EDGAR,\nIRS 990, CRA, and Canada Corporations data.\n\nArgs:\n    q: Search query (company name, ticker, etc.)\n\
      \    sources: Comma-separated list of sources to search (default: all)\n    limit: Maximum results per source (default:\
      \ 10)"
    operationId: search_companies_ingestion_search_get
    security:
    - HTTPBearer: []
    parameters:
    - name: q
      in: query
      required: true
      schema:
        type: string
        title: Q
    - name: sources
      in: query
      required: false
      schema:
        anyOf:
        - type: string
        - type: 'null'
        title: Sources
    - name: limit
      in: query
      required: false
      schema:
        type: integer
        default: 10
        title: Limit
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CompanySearchResponse'
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
/ingestion/autocomplete:
  get:
    tags:
    - Ingestion
    summary: Autocomplete Entities
    description: "Fast autocomplete for entity names.\n\nReturns quick suggestions from pre-scraped data as user types.\n\
      Optimized for low latency - returns minimal data.\n\nArgs:\n    q: Search query (minimum 2 characters)\n    limit: Maximum\
      \ suggestions (default: 10, max: 25)\n    types: Comma-separated entity types to include (organization, person, sponsor)"
    operationId: autocomplete_entities_ingestion_autocomplete_get
    security:
    - HTTPBearer: []
    parameters:
    - name: q
      in: query
      required: true
      schema:
        type: string
        title: Q
    - name: limit
      in: query
      required: false
      schema:
        type: integer
        default: 10
        title: Limit
    - name: types
      in: query
      required: false
      schema:
        anyOf:
        - type: string
        - type: 'null'
        title: Types
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
              title: Response Autocomplete Entities Api V1 Ingestion Autocomplete Get
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
/ingestion/status:
  get:
    tags:
    - Ingestion
    summary: Get Ingestion Status
    description: 'Get status of all data ingestion pipelines.


      Returns the health status, last run information, and

      record counts for each configured data source.'
    operationId: get_ingestion_status_ingestion_status_get
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IngestionStatusResponse'
    security:
    - HTTPBearer: []
/ingestion/runs:
  get:
    tags:
    - Ingestion
    summary: Get Ingestion Runs
    description: "Get history of ingestion runs.\n\nArgs:\n    source: Filter by source name\n    status: Filter by status\n\
      \    limit: Maximum results"
    operationId: get_ingestion_runs_ingestion_runs_get
    security:
    - HTTPBearer: []
    parameters:
    - name: source
      in: query
      required: false
      schema:
        anyOf:
        - type: string
        - type: 'null'
        title: Source
    - name: status
      in: query
      required: false
      schema:
        anyOf:
        - type: string
        - type: 'null'
        title: Status
    - name: limit
      in: query
      required: false
      schema:
        type: integer
        default: 20
        title: Limit
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
              title: Response Get Ingestion Runs Api V1 Ingestion Runs Get
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
/ingestion/runs/{run_id}:
  get:
    tags:
    - Ingestion
    summary: Get Ingestion Run
    description: Get details of a specific ingestion run.
    operationId: get_ingestion_run_ingestion_runs__run_id__get
    security:
    - HTTPBearer: []
    parameters:
    - name: run_id
      in: path
      required: true
      schema:
        type: string
        format: uuid
        title: Run Id
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IngestionRunResponse'
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
/ingestion/runs/{run_id}/logs:
  get:
    tags:
    - Ingestion
    summary: Get Ingestion Run Logs
    description: "Get log output for an ingestion run.\n\nFor active runs, returns logs from the in-memory buffer.\nFor completed\
      \ runs, returns logs from the database.\n\nArgs:\n    run_id: The ingestion run ID\n    offset: Line offset for incremental\
      \ polling"
    operationId: get_ingestion_run_logs_ingestion_runs__run_id__logs_get
    security:
    - HTTPBearer: []
    parameters:
    - name: run_id
      in: path
      required: true
      schema:
        type: string
        format: uuid
        title: Run Id
    - name: offset
      in: query
      required: false
      schema:
        type: integer
        default: 0
        title: Offset
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
              title: Response Get Ingestion Run Logs Api V1 Ingestion Runs  Run Id  Logs Get
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
/ingestion/{source}/trigger:
  post:
    tags:
    - Ingestion
    summary: Trigger Ingestion
    description: "Trigger manual ingestion for a source.\n\nStarts an asynchronous ingestion job and returns immediately\n\
      with a job ID that can be used to track progress.\n\nArgs:\n    source: Data source name (irs990, cra, opencorporates,\
      \ meta_ads)\n    request: Ingestion configuration\n\nReturns:\n    Job ID and status URL for tracking"
    operationId: trigger_ingestion_ingestion__source__trigger_post
    security:
    - HTTPBearer: []
    parameters:
    - name: source
      in: path
      required: true
      schema:
        type: string
        title: Source
    requestBody:
      content:
        application/json:
          schema:
            anyOf:
            - $ref: '#/components/schemas/IngestionTriggerRequest'
            - type: 'null'
            title: Request
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
              title: Response Trigger Ingestion Api V1 Ingestion  Source  Trigger Post
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
/ingestion/provincial:
  get:
    tags:
    - Ingestion
    summary: List Provincial Sources
    description: 'List available provincial corporation data sources.


      Returns information about each province''s data availability

      and ingestion method (bulk vs targeted).'
    operationId: list_provincial_sources_ingestion_provincial_get
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              additionalProperties: true
              type: object
              title: Response List Provincial Sources Api V1 Ingestion Provincial Get
    security:
    - HTTPBearer: []
/ingestion/provincial/{province}:
  post:
    tags:
    - Ingestion
    summary: Trigger Provincial Ingestion
    description: "Trigger provincial corporation ingestion.\n\nFor bulk data provinces (QC), downloads and processes the full\
      \ dataset.\nFor targeted provinces (ON, SK, MB, etc.), requires either:\n- target_entities: List of entity names to\
      \ search\n- from_csv: Path to CSV file with corporation data\n\nArgs:\n    province: Province code (QC, ON, SK, MB,\
      \ NB, PE, NL, NT, YT, NU)\n    request: Ingestion configuration"
    operationId: trigger_provincial_ingestion_ingestion_provincial__province__post
    security:
    - HTTPBearer: []
    parameters:
    - name: province
      in: path
      required: true
      schema:
        type: string
        title: Province
    requestBody:
      content:
        application/json:
          schema:
            anyOf:
            - $ref: '#/components/schemas/ProvincialIngestionRequest'
            - type: 'null'
            title: Request
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
              title: Response Trigger Provincial Ingestion Api V1 Ingestion Provincial  Province  Post
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
/ingestion/provincial/{province}/status:
  get:
    tags:
    - Ingestion
    summary: Get Provincial Ingestion Status
    description: 'Get status of provincial corporation ingestion.


      Returns the latest run information for the specified province.'
    operationId: get_provincial_ingestion_status_ingestion_provincial__province__status_get
    security:
    - HTTPBearer: []
    parameters:
    - name: province
      in: path
      required: true
      schema:
        type: string
        title: Province
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
              title: Response Get Provincial Ingestion Status Api V1 Ingestion Provincial  Province  Status Get
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
/ingestion/provincial/cross-reference:
  post:
    tags:
    - Ingestion
    summary: Trigger Cross Reference
    description: "Trigger cross-referencing of provincial corporations with federal registry.\n\nMatches provincial corporation\
      \ records with federal registry data\nusing business number and name matching strategies.\n\nMatch results are classified\
      \ by confidence:\n- Auto-link (>=95%): Automatically create SAME_AS relationship\n- Flag for review (85-95%): Requires\
      \ manual verification\n- No match (<85%): No relationship created\n\nArgs:\n    request: Cross-reference configuration\
      \ (provinces, thresholds)"
    operationId: trigger_cross_reference_ingestion_provincial_cross_reference_post
    requestBody:
      content:
        application/json:
          schema:
            anyOf:
            - $ref: '#/components/schemas/CrossReferenceRequest'
            - type: 'null'
            title: Request
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              additionalProperties: true
              type: object
              title: Response Trigger Cross Reference Api V1 Ingestion Provincial Cross Reference Post
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
    security:
    - HTTPBearer: []
/ingestion/linkedin/status:
  get:
    tags:
    - Ingestion
    summary: Get Linkedin Ingestion Status
    description: 'Get status of LinkedIn ingestion.


      Returns the latest run information for LinkedIn member ingestion.'
    operationId: get_linkedin_ingestion_status_ingestion_linkedin_status_get
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              additionalProperties: true
              type: object
              title: Response Get Linkedin Ingestion Status Api V1 Ingestion Linkedin Status Get
    security:
    - HTTPBearer: []
/ingestion/linkedin:
  post:
    tags:
    - Ingestion
    summary: Trigger Linkedin Ingestion
    description: "Trigger LinkedIn member ingestion for network research.\n\nIngests LinkedIn member data to map out organizational\
      \ networks.\nCreates Person nodes with EMPLOYED_BY relationships.\n\nSupports two modes:\n1. CSV Import: Upload base64-encoded\
      \ CSV data (recommended)\n2. Browser Scraping: Scrape company pages (requires session cookie)\n\nArgs:\n    request:\
      \ Ingestion configuration including:\n        - company_name: Company name to filter/search\n        - company_url:\
      \ LinkedIn company URL (for scraping)\n        - company_entity_id: UUID of existing org to link members to\n      \
      \  - csv_data: Base64-encoded CSV (for CSV import)\n        - scrape: Enable browser scraping mode\n        - session_cookie:\
      \ LinkedIn li_at cookie (for scraping)\n        - titles_filter: Filter by title keywords (e.g., [\"CEO\", \"Director\"\
      ])\n        - limit: Maximum profiles to process\n\nReturns:\n    Job ID and status URL for tracking"
    operationId: trigger_linkedin_ingestion_ingestion_linkedin_post
    requestBody:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/LinkedInIngestionRequest'
      required: true
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              additionalProperties: true
              type: object
              title: Response Trigger Linkedin Ingestion Api V1 Ingestion Linkedin Post
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
    security:
    - HTTPBearer: []
/ingestion/linkedin/members:
  get:
    tags:
    - Ingestion
    summary: Get Linkedin Members
    description: "Get ingested LinkedIn members.\n\nArgs:\n    company: Filter by company name\n    title: Filter by title\
      \ (partial match)\n    is_executive: Filter for executives only\n    limit: Maximum results (default: 50)\n    offset:\
      \ Pagination offset"
    operationId: get_linkedin_members_ingestion_linkedin_members_get
    security:
    - HTTPBearer: []
    parameters:
    - name: company
      in: query
      required: false
      schema:
        anyOf:
        - type: string
        - type: 'null'
        title: Company
    - name: title
      in: query
      required: false
      schema:
        anyOf:
        - type: string
        - type: 'null'
        title: Title
    - name: is_executive
      in: query
      required: false
      schema:
        anyOf:
        - type: boolean
        - type: 'null'
        title: Is Executive
    - name: limit
      in: query
      required: false
      schema:
        type: integer
        default: 50
        title: Limit
    - name: offset
      in: query
      required: false
      schema:
        type: integer
        default: 0
        title: Offset
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
              title: Response Get Linkedin Members Api V1 Ingestion Linkedin Members Get
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
/ingestion/provincial/cross-reference/review:
  get:
    tags:
    - Ingestion
    summary: Get Cross Reference Review Items
    description: "Get matches flagged for manual review.\n\nReturns provincial corporation records that matched with\n85-95%\
      \ confidence and require human verification.\n\nArgs:\n    province: Filter by province code (optional)\n    limit:\
      \ Maximum results (default: 50)\n    offset: Pagination offset"
    operationId: get_cross_reference_review_items_ingestion_provincial_cross_reference_review_get
    security:
    - HTTPBearer: []
    parameters:
    - name: province
      in: query
      required: false
      schema:
        anyOf:
        - type: string
        - type: 'null'
        title: Province
    - name: limit
      in: query
      required: false
      schema:
        type: integer
        default: 50
        title: Limit
    - name: offset
      in: query
      required: false
      schema:
        type: integer
        default: 0
        title: Offset
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
              title: Response Get Cross Reference Review Items Api V1 Ingestion Provincial Cross Reference Review Get
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
/ingestion/provincial/batch:
  post:
    tags:
    - Ingestion
    summary: Trigger Batch Provincial Ingestion
    description: "Trigger batch ingestion for multiple provinces.\n\nStarts ingestion for all specified provinces (or all\
      \ bulk-data\nprovinces if not specified).\n\nNote: Only provinces with bulk data (QC) are included by default.\nTargeted\
      \ provinces require CSV files and cannot be batched.\n\nArgs:\n    provinces: List of province codes (default: all bulk-data\
      \ provinces)\n    request: Shared ingestion configuration"
    operationId: trigger_batch_provincial_ingestion_ingestion_provincial_batch_post
    requestBody:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Body_trigger_batch_provincial_ingestion_api_v1_ingestion_provincial_batch_post'
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              additionalProperties: true
              type: object
              title: Response Trigger Batch Provincial Ingestion Api V1 Ingestion Provincial Batch Post
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
    security:
    - HTTPBearer: []
/ingestion/quick-ingest:
  post:
    tags:
    - Ingestion
    summary: Quick Ingest Corporation
    description: "Quickly lookup and ingest a single corporation.\n\nThis endpoint:\n1. Searches the local graph for existing\
      \ entity\n2. If not found, searches external sources (ISED, OpenCorporates, provincial registries)\n3. If found externally,\
      \ creates the entity in the graph\n4. Returns the entity details or external matches for user selection\n\nArgs:\n \
      \   request: Corporation name and optional jurisdiction/identifiers\n\nReturns:\n    QuickIngestResponse with entity\
      \ details or external matches"
    operationId: quick_ingest_corporation_ingestion_quick_ingest_post
    requestBody:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/QuickIngestRequest'
      required: true
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QuickIngestResponse'
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
    security:
    - HTTPBearer: []
