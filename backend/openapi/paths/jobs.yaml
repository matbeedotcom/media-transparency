# Jobs API paths
# Background job management

paths:
  /api/v1/jobs:
    get:
      operationId: listJobs
      summary: List jobs
      description: Get list of background jobs with filtering options.
      tags:
        - Jobs
      parameters:
        - name: job_type
          in: query
          description: Filter by job type
          schema:
            type: string
        - name: status
          in: query
          description: Filter by status
          schema:
            type: string
            enum: [pending, running, completed, failed, cancelled]
        - name: limit
          in: query
          schema:
            type: integer
            default: 20
        - name: offset
          in: query
          schema:
            type: integer
            default: 0
      responses:
        '200':
          description: List of jobs
          content:
            application/json:
              schema:
                $ref: '../components/schemas/jobs.yaml#/JobList'

  /api/v1/jobs/{job_id}:
    get:
      operationId: getJobStatus
      summary: Get job status
      description: Get detailed status of a specific job.
      tags:
        - Jobs
      parameters:
        - $ref: '../components/parameters.yaml#/JobIdParam'
      responses:
        '200':
          description: Job status
          content:
            application/json:
              schema:
                $ref: '../components/schemas/jobs.yaml#/JobStatus'
        '404':
          $ref: '../components/responses.yaml#/NotFound'

  /api/v1/jobs/{job_id}/result:
    get:
      operationId: getJobResult
      summary: Get job result
      description: |
        Get the result of a completed job.
        Returns 404 if job is still running or failed.
      tags:
        - Jobs
      parameters:
        - $ref: '../components/parameters.yaml#/JobIdParam'
      responses:
        '200':
          description: Job result
          content:
            application/json:
              schema:
                $ref: '../components/schemas/jobs.yaml#/JobResult'
        '404':
          $ref: '../components/responses.yaml#/NotFound'

  /api/v1/jobs/{job_id}/cancel:
    post:
      operationId: cancelJob
      summary: Cancel job
      description: |
        Request cancellation of a running job.
        Cancellation is best-effort and may not be immediate.
      tags:
        - Jobs
      parameters:
        - $ref: '../components/parameters.yaml#/JobIdParam'
      responses:
        '200':
          description: Cancellation requested
          content:
            application/json:
              schema:
                $ref: '../components/schemas/jobs.yaml#/JobStatus'
        '404':
          $ref: '../components/responses.yaml#/NotFound'
        '409':
          description: Job already completed or cancelled
          content:
            application/json:
              schema:
                $ref: '../components/schemas/common.yaml#/ErrorResponse'
