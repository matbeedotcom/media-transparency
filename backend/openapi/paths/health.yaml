# Health API paths
# Health check endpoints for monitoring service status

paths:
  /:
    get:
      operationId: getRoot
      summary: API root endpoint
      description: Returns basic API information including name, version, and documentation URL.
      tags:
        - Health
      security: []
      responses:
        '200':
          description: API information
          content:
            application/json:
              schema:
                type: object
                properties:
                  name:
                    type: string
                    example: MITDS API
                  version:
                    type: string
                    example: "1.0.0"
                  description:
                    type: string
                    example: Media Influence Topology & Detection System
                  docs:
                    type: string
                    nullable: true
                    example: /docs

  /health:
    get:
      operationId: healthCheck
      summary: Basic health check
      description: Returns basic health status. Use this for simple uptime monitoring.
      tags:
        - Health
      security: []
      responses:
        '200':
          description: Service is healthy
          content:
            application/json:
              schema:
                type: object
                required:
                  - status
                  - service
                properties:
                  status:
                    type: string
                    enum: [healthy]
                    example: healthy
                  service:
                    type: string
                    example: mitds-api

  /health/ready:
    get:
      operationId: readinessCheck
      summary: Readiness check
      description: |
        Verifies database connectivity and other dependencies.
        Returns 503 if any dependency is unhealthy.
        Use this for Kubernetes readiness probes.
      tags:
        - Health
      security: []
      responses:
        '200':
          description: All dependencies are healthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReadinessResponse'
        '503':
          description: One or more dependencies are unhealthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ReadinessResponse'

  /health/live:
    get:
      operationId: livenessCheck
      summary: Liveness check
      description: |
        Confirms the service process is running.
        Use this for Kubernetes liveness probes.
      tags:
        - Health
      security: []
      responses:
        '200':
          description: Service is alive
          content:
            application/json:
              schema:
                type: object
                required:
                  - status
                properties:
                  status:
                    type: string
                    enum: [alive]
                    example: alive

components:
  schemas:
    ReadinessResponse:
      type: object
      required:
        - status
        - checks
      properties:
        status:
          type: string
          enum: [ready, not_ready]
          description: Overall readiness status
        checks:
          type: object
          properties:
            postgres:
              type: string
              description: PostgreSQL connection status
              example: healthy
            neo4j:
              type: string
              description: Neo4j connection status
              example: healthy
            redis:
              type: string
              description: Redis connection status
              example: healthy
