# Meta-Oauth API paths
# Auto-generated by export_openapi.py

/meta/auth/login:
  get:
    tags:
    - Meta OAuth
    summary: Get Meta Auth Url
    description: "Get the Facebook OAuth URL to initiate authentication.\n\nReturns a URL that the frontend should redirect\
      \ the user to.\nThe URL includes:\n- client_id: Your Meta App ID\n- redirect_uri: Callback URL (must be registered in\
      \ Meta App)\n- scope: Requested permissions (ads_read, pages_read_engagement)\n- state: CSRF token for security\n\n\
      Returns:\n    MetaAuthUrlResponse with auth_url and state token"
    operationId: get_meta_auth_url_meta_auth_login_get
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MetaAuthUrlResponse'
/meta/auth/callback:
  get:
    tags:
    - Meta OAuth
    summary: Handle Meta Callback
    description: "Handle the OAuth callback from Facebook.\n\nFacebook redirects here after user grants/denies permissions.\n\
      This endpoint:\n1. Validates the CSRF state token\n2. Exchanges the authorization code for an access token\n3. Exchanges\
      \ short-lived token for long-lived token (60 days)\n4. Stores the token in the database\n5. Redirects to frontend settings\
      \ page with success/error status\n\nQuery Parameters:\n    code: Authorization code from Facebook (on success)\n   \
      \ state: CSRF state token (must match what we sent)\n    error: Error code if user denied or error occurred\n    error_description:\
      \ Human-readable error description\n\nReturns:\n    Redirect to frontend settings page"
    operationId: handle_meta_callback_meta_auth_callback_get
    parameters:
    - name: code
      in: query
      required: false
      schema:
        anyOf:
        - type: string
        - type: 'null'
        title: Code
    - name: state
      in: query
      required: false
      schema:
        anyOf:
        - type: string
        - type: 'null'
        title: State
    - name: error
      in: query
      required: false
      schema:
        anyOf:
        - type: string
        - type: 'null'
        title: Error
    - name: error_description
      in: query
      required: false
      schema:
        anyOf:
        - type: string
        - type: 'null'
        title: Error Description
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema: {}
      '422':
        description: Validation Error
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HTTPValidationError'
/meta/auth/status:
  get:
    tags:
    - Meta OAuth
    summary: Get Meta Status
    description: "Get the current Meta connection status.\n\nReturns information about whether a Facebook account is connected,\n\
      including user details and token expiration.\n\nReturns:\n    MetaAuthStatusResponse with connection details"
    operationId: get_meta_status_meta_auth_status_get
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MetaAuthStatusResponse'
/meta/auth/disconnect:
  delete:
    tags:
    - Meta OAuth
    summary: Disconnect Meta
    description: "Disconnect the Facebook account.\n\nRemoves the stored OAuth token from the database.\nThe system will fall\
      \ back to META_ACCESS_TOKEN env var if set.\n\nReturns:\n    MetaDisconnectResponse with success status"
    operationId: disconnect_meta_meta_auth_disconnect_delete
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MetaDisconnectResponse'
/meta/auth/refresh:
  post:
    tags:
    - Meta OAuth
    summary: Refresh Meta Token
    description: "Attempt to refresh the Meta token if expiring soon.\n\nNote: Meta doesn't support traditional refresh tokens.\
      \ This endpoint\nchecks if the token is expiring soon and prompts re-authentication.\n\nReturns:\n    Status of the\
      \ refresh attempt"
    operationId: refresh_meta_token_meta_auth_refresh_post
    responses:
      '200':
        description: Successful Response
        content:
          application/json:
            schema:
              additionalProperties: true
              type: object
              title: Response Refresh Meta Token Api V1 Meta Auth Refresh Post
